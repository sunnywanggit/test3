(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{473:function(t,s,a){"use strict";a.r(s);var v=a(30),n=Object(v.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("CDN （Content Delivery Network，即内容分发网络）指的是一组分布在各个地区的服务器。这些服务器存储着数据的副本，因此服务器可以根据哪些服务器与用户距离最近，来满足数据的请求。 CDN 提供快速服务，较少受高流量影响。")]),t._v(" "),a("h2",{attrs:{id:"cdn的核心功能特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cdn的核心功能特点"}},[t._v("#")]),t._v(" CDN的核心功能特点")]),t._v(" "),a("p",[t._v("CDN 的核心点有两个，一个是"),a("strong",[t._v("缓存")]),t._v("，一个是"),a("strong",[t._v("回源")]),t._v("。")]),t._v(" "),a("p",[t._v("“缓存”就是说我们把资源 copy 一份到 CDN 服务器上这个过程，“回源”就是说 CDN 发现自己没有这个资源（一般是缓存的数据过期了），转头向根服务器（或者它的上层服务器）去要这个资源的过程。")]),t._v(" "),a("p",[a("strong",[t._v("CDN 往往被用来存放静态资源")]),t._v("。“根服务器”本质上是业务服务器，它的核心任务在于生成动态页面或返回非纯静态页面，这两种过程都是需要计算的。")]),t._v(" "),a("p",[t._v("业务服务器仿佛一个车间，车间里运转的机器轰鸣着为我们产出所需的资源；相比之下，CDN 服务器则像一个仓库，它只充当资源的“栖息地”和“搬运工”。")]),t._v(" "),a("p",[t._v("所谓“静态资源”，就是像 JS、CSS、图片等"),a("strong",[t._v("不需要业务服务器进行计算即得的资源")]),t._v("。而“动态资源”，顾名思义是需要"),a("strong",[t._v("后端实时动态生成的资源")]),t._v("，较为常见的就是 JSP、ASP 或者依赖服务端渲染得到的 HTML 页面。")]),t._v(" "),a("p",[t._v("什么是“非纯静态资源”呢？它是指"),a("strong",[t._v("需要服务器在页面之外作额外计算的 HTML 页面")]),t._v("。具体来说，当我打开某一网站之前，该网站需要通过权限认证等一系列手段确认我的身份、进而决定是否要把 HTML 页面呈现给我。这种情况下 HTML 确实是静态的，但它和业务服务器的操作耦合，我们把它丢到CDN 上显然是不合适的。")]),t._v(" "),a("h2",{attrs:{id:"cdn-的实际应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cdn-的实际应用"}},[t._v("#")]),t._v(" CDN 的实际应用")]),t._v(" "),a("p",[t._v("静态资源本身具有访问频率高、承接流量大的特点，因此静态资源加载速度始终是前端性能的一个非常关键的指标。")]),t._v(" "),a("p",[t._v("CDN 是静态资源提速的重要手段，在许多一线的互联网公司，“静态资源走 CDN”并不是一个建议，而是一个规定。")]),t._v(" "),a("h2",{attrs:{id:"cdn-优化细节"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cdn-优化细节"}},[t._v("#")]),t._v(" CDN 优化细节")]),t._v(" "),a("p",[t._v("如何让 CDN 的效用最大化？这又是需要前后端程序员一起思考的庞大命题。它涉及到 CDN 服务器本身的性能优化、CDN 节点的地址选取等。我们看看离前端最近的这部分细节：CDN 的域名选取。")]),t._v(" "),a("p",[t._v("我们访问淘宝的首页，可以看到其业务服务器的域名是这个：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("taobao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("而 CDN 服务器的域名是这个：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("g"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alicdn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("你会惊讶的发现，这两个域名是"),a("strong",[t._v("不一样的")]),t._v("！")]),t._v(" "),a("p",[t._v("之所以这两个域名会不同，是因为同一个域名下的请求会不分青红皂白地携带 Cookie，而静态资源往往并不需要 Cookie 携带什么认证信息。")]),t._v(" "),a("p",[t._v("把静态资源和主页面置于不同的域名下，"),a("strong",[t._v("完美地避免了不必要的 Cookie 的出现！")])]),t._v(" "),a("p",[t._v("看起来是一个不起眼的小细节，但带来的效用却是惊人的。以电商网站静态资源的流量之庞大，如果没把这个多余的 Cookie 拿下来，不仅用户体验会大打折扣，每年因性能浪费带来的经济开销也将是一个非常恐怖的数字。")])])}),[],!1,null,null,null);s.default=n.exports}}]);